let t="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof exports?exports:{},e=t.requestAnimationFrame||(e=>t.setTimeout(e,50/3)),i=t.cancelAnimationFrame||(e=>t.clearTimeout(e));const r=function(){if("undefined"==typeof process||void 0===process.hrtime||process.versions&&void 0!==process.versions.electron){if(void 0!==t.performance&&void 0!==t.performance.now)return t.performance.now.bind(t.performance);{const e=t.performance&&t.performance.timing&&t.performance.timing.navigationStart?t.performance.timing.navigationStart:Date.now();return function(){return Date.now()-e}}}return function(){const t=process.hrtime();return 1e3*t[0]+t[1]/1e6}}(),n=[];let s=!1,o=!1,a=[];const l=e;let u,h=0,f=120,p=!0;const c=t=>{a.push(t)},d=t=>{let e=n.indexOf(t);e>-1&&n.splice(e,1),n.push(t),h=0,o&&!s&&(u=l(E),s=!0)},_=t=>n.push({update:t}),y=(t=120)=>{f=1.05*t},m=(t=!0)=>{p=t},g=()=>n,b=t=>{o=t},T=()=>{n.length=0,i(u),s=!1},v=t=>{for(let e=0;e<n.length;e++)if(t===n[e])return n[e];return null},A=t=>null!==v(t),w=t=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1),0===n.length&&(i(u),s=!1)},E=(t=r(),e)=>{if(h>=f&&p)return s=!1,h=0,i(u),!1;o&&s?u=l(E):(()=>{for(let t=0;t<a.length;t++)a[t]()})(),n.length||h++;let c=0,d=n.length;for(;c<d;)n[c++].update(t,e),d>n.length&&c--,d=n.length;return!0},M=()=>s,S=()=>p,O={},j={Linear:{None:t=>t},Quadratic:{In:t=>Math.pow(t,2),Out:t=>t*(2-t),InOut:t=>(t*=2)<1?.5*Math.pow(t,2):-.5*(--t*(t-2)-1)},Cubic:{In:t=>Math.pow(t,3),Out:t=>--t*t*t+1,InOut:t=>(t*=2)<1?.5*Math.pow(t,3):.5*((t-=2)*t*t+2)},Quartic:{In:t=>Math.pow(t,4),Out:t=>1- --t*t*t*t,InOut:t=>(t*=2)<1?.5*Math.pow(t,4):-.5*((t-=2)*t*t*t-2)},Quintic:{In:t=>Math.pow(t,5),Out:t=>--t*t*t*t*t+1,InOut:t=>(t*=2)<1?.5*Math.pow(t,5):.5*((t-=2)*t*t*t*t+2)},Sinusoidal:{In:t=>1-Math.cos(t*Math.PI/2),Out:t=>Math.sin(t*Math.PI/2),InOut:t=>.5*(1-Math.cos(Math.PI*t))},Exponential:{In:t=>0===t?0:Math.pow(1024,t-1),Out:t=>1===t?1:1-Math.pow(2,-10*t),InOut:t=>0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},Circular:{In:t=>1-Math.sqrt(1-t*t),Out:t=>Math.sqrt(1- --t*t),InOut:t=>(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},Elastic:{In:t=>0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI),Out:t=>0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1,InOut:t=>0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1},Back:{In(t){const e=1.70158;return t*t*((e+1)*t-e)},Out(t){const e=1.70158;return--t*t*((e+1)*t+e)+1},InOut(t){const e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:t=>1-j.Bounce.Out(1-t),Out(t){let e=2.75,i=7.5625;return t<1/e?i*t*t:t<2/e?i*(t-=1.5/e)*t+.75:t<2.5/e?i*(t-=2.25/e)*t+.9375:i*(t-=2.625/e)*t+.984375},InOut:t=>t<.5?.5*j.Bounce.In(2*t):.5*j.Bounce.Out(2*t-1)+.5},Stepped:{steps:t=>e=>(e*t|0)/t}},R=50/3,I=250,P="_chainedTweens",L="Callback",F="update",x="complete",C="start",N="repeat",q="reverse",k="pause",D="play",U="restart",V="stop",B="seek",G="STRING_PROP",z=/\s+|([A-Za-z?().,{}:""[\]#%]+)|([-+]=+)?([-+]+)?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]=?\d+)?/g;function Q(t){if(t&&t.nodeType||void 0===t||"object"!=typeof t)return t;if(Array.isArray(t))return[].concat(t);if("object"==typeof t){let e={};for(let i in t)e[i]=Q(t[i]);return e}return t}const K=t=>isNaN(+t)||("+"===t[0]||"-"===t[0])&&"="===t[1]||""===t||" "===t,H=/^#([0-9a-f]{6}|[0-9a-f]{3})$/gi,W=(t,e)=>{let i,r,n;3===e.length&&(e=(i=e[0])+i+(r=e[1])+r+(n=e[2])+n);let s=parseInt(e,16);return"rgb("+(i=s>>16&255)+", "+(r=s>>8&255)+", "+(n=255&s)+")"};function X(t){if(t&&t.splice&&t.isString)return t;if("string"!=typeof t)return t;if("="===t.charAt(1))return t;const e=t.replace(H,W).match(z).map(t=>K(t)?t:+t);return e.isString=!0,e}function Y(t,e,i,r){const n=i[t],s=r[t];if(n===s)return!0;if(Array.isArray(n)&&Array.isArray(s)&&n.length===s.length)for(let i=0,r=s.length;i<r;i++){const r=n[i],o=s[i];r===o||"number"==typeof r&&"number"==typeof o||Y(i,e[t],n,s)}if("number"==typeof n&&"number"==typeof s);else if(n&&n.splice&&n.isString&&s&&s.splice&&s.isString);else{if("string"==typeof n&&Array.isArray(s)){const e=X(n),o=s.map(X);return i[t]=e,r[t]=o,!0}if("string"==typeof n||"string"==typeof s){let e=Array.isArray(n)&&n[0]===G?n:X(n),o=Array.isArray(s)&&s[0]===G?s:X(s);if(void 0===e)return;let a=1;for(;a<e.length;)e[a]===o[a]&&"string"==typeof e[a-1]?(e.splice(a-1,2,e[a-1]+e[a]),o.splice(a-1,2,o[a-1]+o[a])):a++;return a=0,e[0]===G&&e.shift(),o[0]===G&&o.shift(),i[t]=e,r[t]=o,!0}if("object"==typeof n&&"object"==typeof s){if(Array.isArray(n)&&!n.isString)return n.map((i,r)=>Y(r,e[t],n,s));for(let i in s)Y(i,e[t],n,s);return!0}}return!1}const Z="rgba(",$=(t,e,i="rgb(")=>"number"==typeof t[e]&&(t[e-1]===i||t[e-3]===i||t[e-5]===i);function J(t,e,i,r,n,s,o){const a=o?i:i[t];let l=o?r:r[t];if(void 0===l)return a;if(void 0===a||"string"==typeof a||a===l)return l;if("object"==typeof a&&"object"==typeof l){if(!a||!l)return e[t];if("object"==typeof a&&a&&a.isString&&l&&l.splice&&l.isString){let i="";for(let t=0,e=a.length;t<e;t++)if(a[t]!==l[t]||"number"!=typeof a[t]||"number"==typeof l[t]){const e="number"==typeof a[t]&&"string"==typeof l[t]&&"="===l[t][1];let r="number"!=typeof a[t]?a[t]:e?a[t]+parseFloat(l[t][0]+l[t].substr(2))*n:a[t]+(l[t]-a[t])*n;($(a,t)||$(a,t,Z))&&(r|=0),i+=r,e&&1===s&&(a[t]=a[t]+parseFloat(l[t][0]+l[t].substr(2)))}else i+=a[t];return o||(e[t]=i),i}if(Array.isArray(a)&&a[0]!==G)for(let i=0,r=a.length;i<r;i++)a[i]!==l[i]&&"string"!=typeof e[t]&&J(i,e[t],a,l,n,s);else if("object"==typeof a&&a&&!a.isString)for(let i in a)a[i]!==l[i]&&J(i,e[t],a,l,n,s)}else if("number"==typeof a){const r="string"==typeof l;e[t]=r?a+parseFloat(l[0]+l.substr(2))*n:a+(l-a)*n,r&&1===s&&(i[t]=e[t])}else"function"==typeof l&&(e[t]=l(n));return e[t]}const tt=/([.[])/g,et=/\]/g,it=function(t,e){const i=t[e],r=e.replace(et,"").split(tt),n=r.length-1;let s=Array.isArray(t),o="object"==typeof t&&!s;return o?(t[e]=null,delete t[e]):s&&t.splice(e,1),r.reduce((t,e,a)=>{s&&"."!==e&&"["!==e&&(e*=1);let l="["===r[a+1];if("."===e||"["===e)return"."===e?(o=!0,s=!1):"["===e&&(o=!1,s=!0),t;if(void 0===t[e]){if(s||o)return t[e]=a===n?i:s||l?[]:o?{}:null,o=s=!1,t[e]}else if(void 0!==t[e])return a===n&&(t[e]=i),t[e];return t},t)},rt=function(t){if("object"==typeof t&&t)for(let e in t)if(-1!==e.indexOf(".")||-1!==e.indexOf("["))it(t,e);else if("object"==typeof t[e]&&t[e]){let i=t[e];for(let t in i)if(-1!==t.indexOf(".")||-1!==t.indexOf("["))it(i,t);else if("object"==typeof i[t]&&i[t]){let e=i[t];for(let t in e)-1===t.indexOf(".")&&-1===t.indexOf("[")||it(e,t)}}return t};var nt=Object.freeze({FRAME_MS:R,TOO_LONG_FRAME_MS:I,CHAINED_TWEENS:P,EVENT_CALLBACK:L,EVENT_UPDATE:F,EVENT_COMPLETE:x,EVENT_START:C,EVENT_REPEAT:N,EVENT_REVERSE:q,EVENT_PAUSE:k,EVENT_PLAY:D,EVENT_RESTART:U,EVENT_STOP:V,EVENT_SEEK:B,STRING_PROP:G,NUM_REGEX:z,deepCopy:Q,decomposeString:X,decompose:Y,RGB:"rgb(",RGBA:Z,isRGBColor:$,recompose:J,SET_NESTED:rt});const st={Linear(t,e,i){const r=t.length-1,n=r*e,s=Math.floor(n),o=st.Utils.Linear;return e<0?o(t[0],t[1],n,i):e>1?o(t[r],t[r-1],r-n,i):o(t[s],t[s+1>r?r:s+1],n-s,i)},Bezier(t,e,i){let r=st.Utils.Reset(i),n=t.length-1,s=Math.pow,o=st.Utils.Bernstein,a=Array.isArray(r);for(let i=0;i<=n;i++)if("number"==typeof r)r+=s(1-e,n-i)*s(e,i)*t[i]*o(n,i);else if(a)for(let a=0,l=r.length;a<l;a++)"number"==typeof r[a]?r[a]+=s(1-e,n-i)*s(e,i)*t[i][a]*o(n,i):r[a]=t[i][a];else if("object"==typeof r)for(let a in r)"number"==typeof r[a]?r[a]+=s(1-e,n-i)*s(e,i)*t[i][a]*o(n,i):r[a]=t[i][a];else if("string"==typeof r){let i="",r=t[Math.round(n*e)];for(let t=1,e=r.length;t<e;t++)i+=r[t];return i}return r},CatmullRom(t,e,i){const r=t.length-1;let n=r*e,s=Math.floor(n);const o=st.Utils.CatmullRom;return t[0]===t[r]?(e<0&&(s=Math.floor(n=r*(1+e))),o(t[(s-1+r)%r],t[s],t[(s+1)%r],t[(s+2)%r],n-s,i)):e<0?o(t[1],t[1],t[0],t[0],-e,i):e>1?o(t[r-1],t[r-1],t[r],t[r],(0|e)-e,i):o(t[s?s-1:0],t[s],t[r<s+1?r:s+1],t[r<s+2?r:s+2],n-s,i)},Utils:{Linear(t,e,i,r){if(t===e||"string"==typeof t){if(e.length&&e.splice&&e.isString){e="";for(let i=0,r=t.length;i<r;i++)e+=t[i]}return e}if("number"==typeof t)return"function"==typeof t?t(i):t+(e-t)*i;if("object"==typeof t){if(void 0!==t.length){const n="string"==typeof t[0]||t.isString;if(n||t[0]===G){let r="";for(let s=n?0:1,o=t.length;s<o;s++){let n=0===i?t[s]:1===i?e[s]:"number"==typeof t[s]?t[s]+(e[s]-t[s])*i:e[s];(i>0&&i<1&&$(t,s)||$(t,s,Z))&&(n|=0),r+=n}return r}if(r&&r.length&&r.splice)for(let n=0,s=r.length;n<s;n++)r[n]=st.Utils.Linear(t[n],e[n],i,r[n])}else for(const n in r)r[n]=st.Utils.Linear(t[n],e[n],i,r[n]);return r}},Reset(t){if(Array.isArray(t)){for(let e=0,i=t.length;e<i;e++)t[e]=st.Utils.Reset(t[e]);return t}if("object"==typeof t){for(let e in t)t[e]=st.Utils.Reset(t[e]);return t}return"number"==typeof t?0:t},Bernstein(t,e){const i=st.Utils.Factorial;return i(t)/i(e)/i(t-e)},Factorial:function(){const t=[1];return e=>{let i=1;if(t[e])return t[e];for(let t=e;t>1;t--)i*=t;return t[e]=i,i}}(),CatmullRom(t,e,i,r,n,s){if("string"==typeof t)return e;if("number"==typeof t){const s=.5*(i-t),o=.5*(r-e),a=n*n;return(2*e-2*i+s+o)*(n*a)+(-3*e+3*i-2*s-o)*a+s*n+e}if("object"==typeof t){if(void 0!==t.length){if(t[0]===G){let s="";for(let o=1,a=t.length;o<a;o++){let a="number"==typeof t[o]?st.Utils.CatmullRom(t[o],e[o],i[o],r[o],n):r[o];($(t,o)||$(t,o,Z))&&(a|=0),s+=a}return s}for(let o=0,a=s.length;o<a;o++)s[o]=st.Utils.CatmullRom(t[o],e[o],i[o],r[o],n,s[o])}else for(const o in s)s[o]=st.Utils.CatmullRom(t[o],e[o],i[o],r[o],n,s[o]);return s}}}},ot={};function at(t,e,i){if(!t||!t.nodeType)return e;const r=t.queueID||"q_"+Date.now();t.queueID||(t.queueID=r);const n=ot[r];if(n){if(n.object===e&&t===n.tween.node&&i._startTime===n.tween._startTime)w(n.tween);else if("object"==typeof e&&e&&n.object){for(let t in e)t in n.object&&(i._startTime===n.tween._startTime?delete n.object[t]:n.propNormaliseRequired=!0);Object.assign(n.object,e)}return n.object}return"object"==typeof e&&e?(ot[r]={tween:i,object:e,propNormaliseRequired:!1},ot[r].object):e}function lt(t,e,i){return e?t?"undefined"!=typeof window&&t===window||"undefined"!=typeof document&&t===document?[t]:"string"==typeof t?!!document.querySelectorAll&&document.querySelectorAll(t):Array.isArray(t)?t:t.nodeType?[t]:i?t:[]:null:t?"undefined"!=typeof window&&t===window||"undefined"!=typeof document&&t===document?t:"string"==typeof t?!!document.querySelector&&document.querySelector(t):Array.isArray(t)?t[0]:t.nodeType?t:i?t:null:null}let ut=0;const ht=j.Linear.None;class ft{static fromTo(t,e,i,r={}){r.quickRender=r.quickRender?r.quickRender:!i;const n=new ft(t,e).to(i,r);return r.quickRender&&(n.render().update(n._startTime),n._rendered=!1,n._onStartCallbackFired=!1),n}static to(t,e,i){return ft.fromTo(t,null,e,i)}static from(t,e,i){return ft.fromTo(t,e,null,i)}constructor(t,e){return this.id=ut++,!t||"object"!=typeof t||e||t.nodeType?t&&(t.nodeType||t.length||"string"==typeof t)&&(t=this.node=lt(t),e=this.object=at(t,e,this)):(e=this.object=t,t=null),this._valuesEnd=null,this._valuesStart=Array.isArray(e)?[]:{},this._duration=1e3,this._easingFunction=ht,this._easingReverse=ht,this._interpolationFunction=st.Linear,this._startTime=0,this._initTime=0,this._delayTime=0,this._repeat=0,this._r=0,this._isPlaying=!1,this._yoyo=!1,this._reversed=!1,this._onStartCallbackFired=!1,this._pausedTime=null,this._isFinite=!0,this._maxListener=15,this._chainedTweensCount=0,this._prevTime=null,this}setMaxListener(t=15){return this._maxListener=t,this}on(t,e){const{_maxListener:i}=this,r=t+L;for(let t=0;t<i;t++){const i=r+t;if(!this[i]){this[i]=e;break}}return this}once(t,e){const{_maxListener:i}=this,r=t+L;for(let t=0;t<i;t++){const i=r+t;if(!this[i]){this[i]=((...t)=>{e.apply(this,t),this[i]=null});break}}return this}off(t,e){const{_maxListener:i}=this,r=t+L;for(let t=0;t<i;t++){const i=r+t;this[i]===e&&(this[i]=null)}return this}emit(t,e,i,r){const{_maxListener:n}=this,s=t+L;if(!this[s+0])return this;for(let t=0;t<n;t++){const n=s+t;this[n]&&this[n](e,i,r)}return this}isPlaying(){return this._isPlaying}isStarted(){return this._onStartCallbackFired}reverse(t){const{_reversed:e}=this;return this._reversed=void 0!==t?t:!e,this}reversed(){return this._reversed}pause(){return this._isPlaying?(this._isPlaying=!1,w(this),this._pausedTime=r(),this.emit(k,this.object)):this}play(){return this._isPlaying?this:(this._isPlaying=!0,this._startTime+=r()-this._pausedTime,this._initTime=this._startTime,d(this),this._pausedTime=r(),this.emit(D,this.object))}restart(t){return this._repeat=this._r,this.reassignValues(),d(this),this.emit(U,this.object)}seek(t,e){const{_duration:i,_initTime:r,_startTime:n,_reversed:s}=this;let o=r+t;return this._isPlaying=!0,o<n&&n>=r&&(this._startTime-=i,this._reversed=!s),this.update(t,!1),this.emit(B,t,this.object),e?this:this.pause()}duration(t){return this._duration="function"==typeof t?t(this._duration):t,this}to(t,e=1e3,i){if(this._valuesEnd=t,"number"==typeof e||"function"==typeof e)this._duration="function"==typeof e?e(this._duration):e;else if("object"==typeof e)for(const t in e)if("function"==typeof this[t]){const[i=null,r=null,n=null,s=null]=Array.isArray(e[t])?e[t]:[e[t]];this[t](i,r,n,s)}return this}render(){if(this._rendered)return this;let{_valuesStart:t,_valuesEnd:e,object:i,node:r,InitialValues:n}=this;if(rt(i),rt(e),r&&r.queueID&&ot[r.queueID]){const t=ot[r.queueID];if(t.propNormaliseRequired&&t.tween!==this){for(const i in e)t.tween._valuesEnd[i];t.normalisedProp=!0,t.propNormaliseRequired=!1}}if(r&&n&&(i&&0!==Object.keys(i).length?e&&0!==Object.keys(e).length||(e=this._valuesEnd=n(r,i)):i=this.object=at(r,n(r,e),this)),!t.processed){for(const r in e){let n=i&&i[r]&&Q(i[r]),s=e[r];if(!(O[r]&&O[r].init&&(O[r].init.call(this,n,s,r,i),void 0===n&&t[r]&&(n=t[r]),O[r].skipProcess))&&!("number"==typeof n&&isNaN(n)||null===n||null===s||!1===n||!1===s||void 0===n||void 0===s||n===s)){if(t[r]=n,Array.isArray(s))if(Array.isArray(n))s.isString&&i[r].isString&&!n.isString?n.isString=!0:Y(r,i,t,e);else{s.unshift(n);for(let t=0,e=s.length;t<e;t++)"string"==typeof s[t]&&(s[t]=X(s[t]))}else Y(r,i,t,e);"number"!=typeof n||"string"!=typeof s||s[1]}}t.processed=!0}return ft.Renderer&&this.node&&ft.Renderer.init&&(ft.Renderer.init.call(this,i,t,e),this.__render=!0),this._rendered=!0,this}start(t){return this._startTime=void 0!==t?"string"==typeof t?r()+parseFloat(t):t:r(),this._startTime+=this._delayTime,this._initTime=this._prevTime=this._startTime,this._onStartCallbackFired=!1,this._rendered=!1,this._isPlaying=!0,d(this),this}stop(){let{_isPlaying:t,_isFinite:e,object:i,_startTime:r,_duration:n,_r:s,_yoyo:o,_reversed:a}=this;if(!t)return this;let l=e?(s+1)%2==1:!a;return this._reversed=!1,o&&l?this.update(r):this.update(r+n),w(this),this.emit(V,i)}delay(t){return this._delayTime="function"==typeof t?t(this._delayTime):t,this}chainedTweens(){if(this._chainedTweensCount=arguments.length,!this._chainedTweensCount)return this;for(let t=0,e=this._chainedTweensCount;t<e;t++)this[P+t]=arguments[t];return this}repeat(t){return this._repeat=this._duration?"function"==typeof t?t(this._repeat):t:0,this._r=this._repeat,this._isFinite=isFinite(t),this}reverseDelay(t){return this._reverseDelayTime="function"==typeof t?t(this._reverseDelayTime):t,this}yoyo(t,e){return this._yoyo="function"==typeof t?t(this._yoyo):null===t?this._yoyo:t,t||(this._reversed=!1),this._easingReverse=e||null,this}easing(t){return this._easingFunction=t,this}interpolation(t){return"function"==typeof t&&(this._interpolationFunction=t),this}reassignValues(t){const{_valuesStart:e,object:i,_delayTime:n}=this;this._isPlaying=!0,this._startTime=void 0!==t?t:r(),this._startTime+=n,this._reversed=!1,d(this);for(const t in e){const r=e[t];i[t]=r}return this}update(t,e,i){let n,s,o,{_onStartCallbackFired:a,_easingFunction:l,_interpolationFunction:u,_easingReverse:h,_repeat:f,_delayTime:p,_reverseDelayTime:c,_yoyo:d,_reversed:_,_startTime:y,_prevTime:m,_duration:g,_valuesStart:b,_valuesEnd:T,object:v,_isFinite:A,_isPlaying:E,__render:j,_chainedTweensCount:L}=this,k=0;if(g){let e=(t=void 0!==t?t:r())-m;if(this._prevTime=t,e>I&&M()&&S()&&(t-=e-R),!E||t<y&&!i)return!0;n=(n=(t-y)/g)>1?1:n,n=_?1-n:n}else n=1,f=0;if(a||(this._rendered||(this.render(),this._rendered=!0),this.emit(C,v),this._onStartCallbackFired=!0),s=_&&h||l,!v)return!0;for(o in T){const t=b[o];if(!(null!=t||O[o]&&O[o].update))continue;const e=T[o],i=s[o]?s[o](n):"function"==typeof s?s(n):ht(n),r=u[o]?u[o]:"function"==typeof u?u:st.Linear;"number"==typeof e?v[o]=t+(e-t)*i:!Array.isArray(e)||e.isString||Array.isArray(t)?e&&e.update?e.update(i):"function"==typeof e?v[o]=e(i):"string"==typeof e&&"number"==typeof t?v[o]=t+parseFloat(e[0]+e.substr(2))*i:J(o,v,b,T,i,n):v[o]=r(e,i,v[o]),O[o]&&O[o].update&&O[o].update.call(this,v[o],t,e,i,n,o),k++}if(!k)return w(this),!1;if(j&&ft.Renderer&&ft.Renderer.update&&ft.Renderer.update.call(this,v,n),this.emit(F,v,n,t),1===n||_&&0===n){if(f>0&&g>0){if(A&&this._repeat--,d)this._reversed=!_;else for(o in T){let t=T[o];"string"==typeof t&&"number"==typeof b[o]&&(b[o]+=parseFloat(t[0]+t.substr(2)))}return this.emit(d&&!_?q:N,v),this._startTime=_&&c?t-c:t+p,!0}if(e||(this._isPlaying=!1,w(this),ut--),this.emit(x,v),this._repeat=this._r,L)for(let e=0;e<L;e++)this[P+e].start(t+g);return!1}return!0}}class pt{constructor(){this.totalTime=0,this.labels=[],this.offsets=[]}parseLabel(t,e){const{offsets:i,labels:r}=this;let n=r.indexOf(t);if("string"==typeof t&&-1!==t.indexOf("=")&&!e&&-1===n){const i=t.substr(t.indexOf("=")-1,2),s=t.split(i);e=2===s.length?i+s[1]:null,t=s[0],n=r.indexOf(t)}if(-1!==n&&t){let t=i[n]||0;if("number"==typeof e)t=e;else if("string"==typeof e&&-1!==e.indexOf("=")){const i=e.charAt(0);e=Number(e.substr(2)),"+"===i||"-"===i?t+=parseFloat(i+e):"*"===i?t*=e:"/"===i?t/=e:"%"===i&&(t*=e/100)}return t}return"number"==typeof e?e:0}addLabel(t,e){return this.labels.push(t),this.offsets.push(this.parseLabel(t,e)),this}setLabel(t,e){const i=this.labels.indexOf(t);return-1!==i&&this.offsets.splice(i,1,this.parseLabel(t,e)),this}eraseLabel(t){const e=this.labels.indexOf(t);return-1!==e&&(this.labels.splice(e,1),this.offsets.splice(e,1)),this}}const ct=t=>{let e,i,r;for(r=t.length;r;r-=1)e=Math.floor(Math.random()*r),i=t[r-1],t[r-1]=t[e],t[e]=i;return t};let dt=0;class _t extends ft{constructor(t){return super(),this._duration=0,this._startTime=t&&void 0!==t.startTime?t.startTime:r(),this._tweens=[],this.elapsed=0,this._id=dt++,this._defaultParams=t,this.position=new pt,this.position.addLabel("afterLast",this._duration),this.position.addLabel("afterInit",this._startTime),this._onStartCallbackFired=!1,this}mapTotal(t){return t.call(this,this._tweens),this}timingOrder(t){const e=t(this._tweens.map(t=>t._startTime));return this._tweens.map((t,i)=>{t._startTime=e[i]}),this}getTiming(t,e,i,r=0){if("reverse"===t){const{stagger:t}=i,n=(t||0)*(e.length-1);return e.map((e,i)=>n-(t||0)*i+r)}if("async"===t)return e.map(t=>r);if("sequence"===t||"delayed"===t){let{stagger:t}=i;return t||(t=(i.duration||1e3)/(e.length-1)),e.map((e,i)=>t*i+r)}if("oneByOne"===t)return e.map(t=>i.duration);if("shuffle"===t){const{stagger:t}=i;return ct(e.map((e,i)=>(t||0)*i+r))}{const{stagger:t}=i;return e.map((e,i)=>(t||0)*i+r)}}fromTo(t,e,i,r){if((t=lt(t,!0,!0))&&t.length){this._defaultParams&&(r=r?{...this._defaultParams,...r}:this._defaultParams);const n=r.label,s="number"==typeof n?n:this.position.parseLabel(void 0!==n?n:"afterLast",null),o=this.getTiming(r.mode,t,r,s);for(let n,s=0,a=t.length;s<a;s++)n=t[s],this.add(ft.fromTo(n,"function"==typeof e?e(s,t.length):"object"==typeof e&&e?{...e}:null,"function"==typeof i?i(s,t.length):i,"function"==typeof r?r(s,t.length):r),o[s])}return this.start()}from(t,e,i){return this.fromTo(t,e,null,i)}to(t,e,i){return this.fromTo(t,null,e,i)}addLabel(t,e){return this.position.addLabel(t,e),this}map(t){for(let e=0,i=this._tweens.length;e<i;e++){const i=this._tweens[e];t(i,e),this._duration=Math.max(this._duration,i._duration+i._startTime)}return this}add(t,e){if(Array.isArray(t))return t.map(t=>{this.add(t,e)}),this;"object"!=typeof t||t instanceof ft||(t=new ft(t.from).to(t.to,t));const{_defaultParams:i,_duration:r}=this;if(i)for(const e in i)"function"==typeof t[e]&&t[e](i[e]);const n="number"==typeof e?e:this.position.parseLabel(void 0!==e?e:"afterLast",null);return t._startTime=Math.max(this._startTime,t._delayTime,n),t._delayTime=n,t._isPlaying=!0,this._duration=Math.max(r,Math.max(t._startTime+t._delayTime,t._duration)),this._tweens.push(t),this.position.setLabel("afterLast",this._duration),this}restart(){return this._startTime+=r(),d(this),this.emit(U)}easing(t){return this.map(e=>e.easing(t))}interpolation(t){return this.map(e=>e.interpolation(t))}update(t){const{_tweens:e,_duration:i,_reverseDelayTime:n,_startTime:s,_reversed:o,_yoyo:a,_repeat:l,_isFinite:u,_isPlaying:h,_prevTime:f,_onStartCallbackFired:p}=this;let c,d=(t=void 0!==t?t:r())-f;if(this._prevTime=t,d>I&&M()&&S()&&(t-=d-R),!h||t<s)return!0;c=(c=(t-s)/i)>1?1:c,c=o?1-c:c,this.elapsed=c,p||(this.emit(C),this._onStartCallbackFired=!0);const _=t-s,y=o?i-_:_;let m=0;for(;m<e.length;)e[m].update(y),m++;if(this.emit(F,c,_),1===c||o&&0===c){if(l){for(u&&this._repeat--,this.emit(o?q:N),a&&(this._reversed=!o,this.timingOrder(t=>t.reverse())),this._startTime=o&&n?t+n:t,m=0;m<e.length;)e[m].reassignValues(t),m++;return!0}return this.emit(x),this._repeat=this._r,w(this),this._isPlaying=!1,!1}return!0}progress(t){return void 0!==t?this.update(t*this._duration):this.elapsed}}const yt=(t,e)=>{let i=Array.isArray(t)&&!t.isString,r="string"==typeof t?t:i?t.slice():{...t};if(i)for(let i=0,n=t.length;i<n;i++)t[i]===e[i]&&"number"==typeof t[i]&&"number"!=typeof e[i]||Y(i,r,t,e);else if("object"==typeof t)for(let i in t)t[i]===e[i]&&"number"==typeof t[i]&&"number"!=typeof e[i]||Y(i,r,t,e);else if("string"==typeof t){t=X(t),e=X(e);let i=1;for(;i<t.length;)t[i]===e[i]&&"string"==typeof t[i-1]?(t.splice(i-1,2,t[i-1]+t[i]),e.splice(i-1,2,e[i-1]+e[i])):i++}return n=>{if(i)for(let i=0,s=t.length;i<s;i++)J(i,r,t,e,n);else if("object"==typeof r)for(let i in t)J(i,r,t,e,n);else"string"==typeof r&&(r=J(0,0,t,e,n,n,!0));return r}};export{j as Easing,y as FrameThrottle,st as Interpolation,yt as Interpolator,O as Plugins,lt as Selector,_t as Timeline,m as ToggleLagSmoothing,ft as Tween,d as add,b as autoPlay,v as get,g as getAll,A as has,M as isRunning,r as now,c as onRequestTick,_ as onTick,w as remove,T as removeAll,E as update,nt as utils};
//# sourceMappingURL=es6-tween.js.map
